name: Compilar Entities
on:
  push:
    branches:
      - "main"
      - "test"
      - "dev"
jobs:
  build:
    runs-on: 'ubuntu-latest'
    env:
      solution: Entities
      version: 1.0.${{ github.run_number }}
      versionSuffix: ${{ github.ref_name }}
    steps:
    - name: Descarga del c√≥digo
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: Instalar JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: 17
        distribution: 'zulu'

    - name: Cache de paquetes SonarCloud
      uses: actions/cache@v3
      with:
        path: ~/sonar/cache
        key: ${{ runner.os }}-sonar
        restore-keys: ${{ runner.os }}-sonar

    - name: Cache de scanner SonarCloud
      id: cache-sonar-scanner
      uses: actions/cache@v3
      with:
        path: ./.sonar/scanner
        key: ${{ runner.os }}-sonar-scanner
        restore-keys: ${{ runner.os }}-sonar-scanner
    
    - name: Instalar scanner SonarCloud
        if: steps.cache-sonar-scanner.outputs.cache-hit != 'true'
        run: 'dotnet tool update dotnet-sonarscanner --tool-path ./.sonar/scanner'
